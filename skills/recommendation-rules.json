{
  "version": "2025-12-14",
  "rules": [
    {
      "trigger": {
        "file_patterns": [
          "**/auth/**",
          "**/security/**",
          "**/*secret*.py",
          "**/*secret*.ts"
        ]
      },
      "recommend": [
        {
          "skill": "owasp-top-10",
          "confidence": 0.9,
          "reason": "Auth/security code touched; apply OWASP checks"
        },
        {
          "skill": "secure-coding-practices",
          "confidence": 0.87,
          "reason": "Security-sensitive paths modified"
        },
        {
          "skill": "threat-modeling-techniques",
          "confidence": 0.82,
          "reason": "Plan threat models for auth/security surfaces"
        },
        {
          "skill": "security-testing-patterns",
          "confidence": 0.8,
          "reason": "Add security-focused tests for new surfaces"
        }
      ]
    },
    {
      "trigger": {
        "file_patterns": [
          "**/tests/**/*.py",
          "**/*_test.py",
          "**/test_*.py"
        ]
      },
      "recommend": [
        {
          "skill": "python-testing-patterns",
          "confidence": 0.85,
          "reason": "Python tests edited; apply proven patterns"
        },
        {
          "skill": "testing-anti-patterns",
          "confidence": 0.82,
          "reason": "Avoid flaky/slow test pitfalls"
        },
        {
          "skill": "test-driven-development",
          "confidence": 0.8,
          "reason": "Lean on TDD guidance for new coverage"
        },
        {
          "skill": "systematic-debugging",
          "confidence": 0.75,
          "reason": "Structure repro and debugging paths for failing tests"
        }
      ]
    },
    {
      "trigger": {
        "file_patterns": [
          "**/*.py",
          "**/requirements.txt",
          "**/pyproject.toml"
        ]
      },
      "recommend": [
        {
          "skill": "python-performance-optimization",
          "confidence": 0.82,
          "reason": "Python code updated; check perf hotspots early"
        },
        {
          "skill": "async-python-patterns",
          "confidence": 0.78,
          "reason": "Async patterns often relevant in Python services"
        }
      ]
    },
    {
      "trigger": {
        "file_patterns": [
          "**/*.ts",
          "**/*.tsx",
          "**/package.json",
          "**/tsconfig.json"
        ]
      },
      "recommend": [
        {
          "skill": "typescript-advanced-patterns",
          "confidence": 0.83,
          "reason": "TS code touched; advanced typing patterns may help"
        },
        {
          "skill": "react-performance-optimization",
          "confidence": 0.8,
          "reason": "TSX/React likely; check render and memo patterns"
        },
        {
          "skill": "condition-based-waiting",
          "confidence": 0.72,
          "reason": "Async UI flows benefit from robust waiting patterns"
        }
      ]
    },
    {
      "trigger": {
        "file_patterns": [
          "**/*.spec.ts",
          "**/*.test.ts",
          "**/*.test.tsx",
          "**/tests/**/*.ts",
          "**/tests/**/*.tsx"
        ]
      },
      "recommend": [
        {
          "skill": "webapp-testing",
          "confidence": 0.83,
          "reason": "Frontend tests edited; use Playwright/webapp testing flows"
        },
        {
          "skill": "testing-anti-patterns",
          "confidence": 0.8,
          "reason": "Keep JS/TS tests reliable and fast"
        },
        {
          "skill": "react-performance-optimization",
          "confidence": 0.76,
          "reason": "Perf fixes often pair with UI test changes"
        }
      ]
    },
    {
      "trigger": {
        "file_patterns": [
          "**/*.tf",
          "**/terraform/**"
        ]
      },
      "recommend": [
        {
          "skill": "terraform-best-practices",
          "confidence": 0.9,
          "reason": "Terraform detected; apply proven IaC practices"
        },
        {
          "skill": "gitops-workflows",
          "confidence": 0.78,
          "reason": "Consider GitOps flow for infra changes"
        }
      ]
    },
    {
      "trigger": {
        "file_patterns": [
          "**/k8s/**",
          "**/kubernetes/**",
          "**/charts/**",
          "**/helm/**",
          "**/*deployment*.yaml"
        ]
      },
      "recommend": [
        {
          "skill": "kubernetes-deployment-patterns",
          "confidence": 0.9,
          "reason": "Kubernetes manifests detected; use deployment patterns"
        },
        {
          "skill": "helm-chart-patterns",
          "confidence": 0.86,
          "reason": "Helm detected; apply chart structure best practices"
        },
        {
          "skill": "kubernetes-security-policies",
          "confidence": 0.84,
          "reason": "Add/verify security policies for workloads"
        },
        {
          "skill": "gitops-workflows",
          "confidence": 0.8,
          "reason": "Consider GitOps/CD for K8s changes"
        }
      ]
    },
    {
      "trigger": {
        "file_patterns": [
          "**/openapi.*",
          "**/swagger.*",
          "**/api/**",
          "**/*.http"
        ]
      },
      "recommend": [
        {
          "skill": "api-design-patterns",
          "confidence": 0.86,
          "reason": "API artifacts detected; design patterns can help"
        },
        {
          "skill": "api-gateway-patterns",
          "confidence": 0.8,
          "reason": "Gateway/routing strategies often needed for APIs"
        }
      ]
    },
    {
      "trigger": {
        "file_patterns": [
          "**/eventsourcing/**",
          "**/event-sourcing/**",
          "**/cqrs/**",
          "**/*event_bus*.*"
        ]
      },
      "recommend": [
        {
          "skill": "cqrs-event-sourcing",
          "confidence": 0.9,
          "reason": "Event sourcing/CQRS files present"
        },
        {
          "skill": "event-driven-architecture",
          "confidence": 0.84,
          "reason": "Broader event architecture guidance may help"
        }
      ]
    },
    {
      "trigger": {
        "file_patterns": [
          "**/migrations/**",
          "**/schema/**",
          "**/database/**",
          "**/*ddl*.*"
        ]
      },
      "recommend": [
        {
          "skill": "database-design-patterns",
          "confidence": 0.86,
          "reason": "DB schema/migration work detected"
        }
      ]
    },
    {
      "trigger": {
        "file_patterns": [
          "**/services/**",
          "**/service/**/handlers/**",
          "**/microservice/**"
        ]
      },
      "recommend": [
        {
          "skill": "microservices-patterns",
          "confidence": 0.84,
          "reason": "Service-oriented structure detected"
        },
        {
          "skill": "api-gateway-patterns",
          "confidence": 0.78,
          "reason": "Gateways often required for microservices"
        }
      ]
    },
    {
      "trigger": {
        "file_patterns": [
          ".github/workflows/*.yml",
          "**/.gitlab-ci.yml",
          "**/ci/**",
          "**/cd/**"
        ]
      },
      "recommend": [
        {
          "skill": "gitops-workflows",
          "confidence": 0.82,
          "reason": "CI/CD pipelines updated; consider GitOps alignment"
        },
        {
          "skill": "verification-before-completion",
          "confidence": 0.78,
          "reason": "Ensure verification gates before deploy/merge"
        }
      ]
    },
    {
      "trigger": {
        "file_patterns": [
          "**/Dockerfile",
          "**/docker-compose*.yml"
        ]
      },
      "recommend": [
        {
          "skill": "defense-in-depth",
          "confidence": 0.8,
          "reason": "Container boundaries benefit from layered security"
        },
        {
          "skill": "security-testing-patterns",
          "confidence": 0.76,
          "reason": "Harden images with dedicated tests"
        }
      ]
    },
    {
      "trigger": {
        "file_patterns": [
          "**/docs/**",
          "**/*.md"
        ]
      },
      "recommend": [
        {
          "skill": "document-skills",
          "confidence": 0.8,
          "reason": "Documentation touched; use doc patterns"
        },
        {
          "skill": "writing-skills",
          "confidence": 0.78,
          "reason": "Improve clarity and structure of docs"
        },
        {
          "skill": "internal-comms",
          "confidence": 0.74,
          "reason": "Summaries/announcements often needed alongside docs"
        },
        {
          "skill": "sharing-skills",
          "confidence": 0.7,
          "reason": "Prep assets for distribution"
        }
      ]
    },
    {
      "trigger": {
        "file_patterns": [
          "**/docs/plans/**",
          "**/scenarios/**",
          "**/planning/**",
          "**/notes/**",
          "**/TODO.md",
          "**/todo.md"
        ]
      },
      "recommend": [
        {
          "skill": "ctx-brainstorming",
          "confidence": 0.84,
          "reason": "Planning/ideation docs detected; run brainstorm"
        },
        {
          "skill": "idea-lab",
          "confidence": 0.82,
          "reason": "Timeboxed option generation helps early planning"
        },
        {
          "skill": "writing-plans",
          "confidence": 0.76,
          "reason": "Document plans clearly for execution handoff"
        },
        {
          "skill": "executing-plans",
          "confidence": 0.72,
          "reason": "Ensure plan-to-execution linkage"
        },
        {
          "skill": "assumption-buster",
          "confidence": 0.76,
          "reason": "Reframe constraints to unlock new angles"
        },
        {
          "skill": "mashup",
          "confidence": 0.74,
          "reason": "Cross-domain inspiration for concepts"
        },
        {
          "skill": "concept-forge",
          "confidence": 0.72,
          "reason": "Score and pick experiments from idea sets"
        },
        {
          "skill": "pre-mortem",
          "confidence": 0.7,
          "reason": "Add guardrails to the chosen plan"
        }
      ]
    },
    {
      "trigger": {
        "file_patterns": [
          "**/.git/worktrees/**",
          "**/worktrees/**"
        ]
      },
      "recommend": [
        {
          "skill": "using-git-worktrees",
          "confidence": 0.85,
          "reason": "Worktree usage detected; optimize workflow"
        },
        {
          "skill": "finishing-a-development-branch",
          "confidence": 0.76,
          "reason": "Ensure branches complete cleanly with worktrees"
        }
      ]
    },
    {
      "trigger": {
        "file_patterns": [
          "**/bugs/**",
          "**/issues/**",
          "**/debug/**"
        ]
      },
      "recommend": [
        {
          "skill": "root-cause-tracing",
          "confidence": 0.82,
          "reason": "Debug artifacts present; trace causes systematically"
        },
        {
          "skill": "systematic-debugging",
          "confidence": 0.8,
          "reason": "Follow structured debugging steps"
        },
        {
          "skill": "dispatching-parallel-agents",
          "confidence": 0.72,
          "reason": "Parallel agent debugging can speed triage"
        }
      ]
    },
    {
      "trigger": {
        "file_patterns": [
          "**/CODE_REVIEW.md",
          "**/pull_request_template*",
          "**/.github/pull_request*"
        ]
      },
      "recommend": [
        {
          "skill": "requesting-code-review",
          "confidence": 0.82,
          "reason": "PR templates touched; prep for reviews"
        },
        {
          "skill": "receiving-code-review",
          "confidence": 0.78,
          "reason": "Guidance for handling incoming review feedback"
        },
        {
          "skill": "verification-before-completion",
          "confidence": 0.74,
          "reason": "Ensure verification steps are part of PR flow"
        }
      ]
    },
    {
      "trigger": {
        "file_patterns": [
          "**/agents/**",
          "**/modes/**",
          "**/workflows/**",
          "**/rules/**"
        ]
      },
      "recommend": [
        {
          "skill": "subagent-driven-development",
          "confidence": 0.84,
          "reason": "Agent/mode changes benefit from modular subagent guidance"
        },
        {
          "skill": "dispatching-parallel-agents",
          "confidence": 0.8,
          "reason": "Parallel agents can accelerate this kind of work"
        },
        {
          "skill": "using-superpowers",
          "confidence": 0.76,
          "reason": "Reference superpowers patterns for agent orchestration"
        }
      ]
    },
    {
      "trigger": {
        "file_patterns": [
          "**/skills/**",
          "**/skill-rules.json",
          "**/recommendation-rules.json"
        ]
      },
      "recommend": [
        {
          "skill": "skill-creator",
          "confidence": 0.85,
          "reason": "Skill files touched; use creation guide"
        },
        {
          "skill": "template-skill",
          "confidence": 0.8,
          "reason": "Start from the template to stay consistent"
        },
        {
          "skill": "sharing-skills",
          "confidence": 0.76,
          "reason": "Prep skills for distribution after edits"
        }
      ]
    },
    {
      "trigger": {
        "file_patterns": [
          "**/design/**",
          "**/canvas/**",
          "**/figma/**"
        ]
      },
      "recommend": [
        {
          "skill": "canvas-design",
          "confidence": 0.82,
          "reason": "Design assets updated; use canvas design patterns"
        },
        {
          "skill": "internal-comms",
          "confidence": 0.7,
          "reason": "Share design updates with stakeholders"
        }
      ]
    },
    {
      "trigger": {
        "file_patterns": [
          "**/community/**",
          "**/announcement/**",
          "**/changelog/**"
        ]
      },
      "recommend": [
        {
          "skill": "community",
          "confidence": 0.8,
          "reason": "Community-facing changes; craft the right tone"
        },
        {
          "skill": "internal-comms",
          "confidence": 0.74,
          "reason": "Prepare internal/external comms for updates"
        }
      ]
    }
  ]
}
